{"ast":null,"code":"import _objectSpread from\"/Users/a000/Desktop/react-soc-2/my-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{logout,login}from\"../components/api/api\";var GET_AUTH='GET_AUTH';var LOGOUT='LOGOUT';var initialState={id:null,login:'',email:'',isAuth:false};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case GET_AUTH:return _objectSpread(_objectSpread(_objectSpread({},state),action.authInfo),{},{isAuth:true});case LOGOUT:return _objectSpread(_objectSpread({},state),{},{isAuth:false,id:null,login:'',email:''});default:return state;}};export var getAuth=function getAuth(authInfo){return{type:GET_AUTH,authInfo:authInfo};};var logoutAC=function logoutAC(){return{type:LOGOUT};};export var logoutThunk=function logoutThunk(){return function(dispatch){logout().then(function(response){if(response.data.resultCode===0)dispatch(logoutAC());});};};export var loginThunk=function loginThunk(email,password,rememberMe){return function(dispatch){login(email,password,rememberMe).then(function(response){if(response.data.resultCode===0)dispatch(getAuth({email:email,id:response.data.data.userId}));});};};export default authReducer;","map":{"version":3,"sources":["/Users/a000/Desktop/react-soc-2/my-react-app/src/redux/auth-reducer.js"],"names":["logout","login","GET_AUTH","LOGOUT","initialState","id","email","isAuth","authReducer","state","action","type","authInfo","getAuth","logoutAC","logoutThunk","dispatch","then","response","data","resultCode","loginThunk","password","rememberMe","userId"],"mappings":"kKAAA,OAASA,MAAT,CAAiBC,KAAjB,KAA8B,uBAA9B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,UAAjB,CACA,GAAMC,CAAAA,MAAM,CAAG,QAAf,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,EAAE,CAAE,IADa,CAEjBJ,KAAK,CAAE,EAFU,CAGjBK,KAAK,CAAE,EAHU,CAIjBC,MAAM,CAAE,KAJS,CAArB,CAOA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAgC,IAA/BC,CAAAA,KAA+B,2DAAzBL,YAAyB,IAAXM,CAAAA,MAAW,2CAChD,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKT,CAAAA,QAAL,CACI,oDAAWO,KAAX,EAAqBC,MAAM,CAACE,QAA5B,MAAsCL,MAAM,CAAE,IAA9C,GACJ,IAAKJ,CAAAA,MAAL,CACI,sCAAWM,KAAX,MAAkBF,MAAM,CAAE,KAA1B,CAAiCF,EAAE,CAAE,IAArC,CAA2CJ,KAAK,CAAE,EAAlD,CAAsDK,KAAK,CAAE,EAA7D,GACJ,QAAS,MAAOG,CAAAA,KAAP,CALb,CAOH,CARD,CAUA,MAAO,IAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACD,QAAD,QAAe,CAClCD,IAAI,CAAET,QAD4B,CAElCU,QAAQ,CAARA,QAFkC,CAAf,EAAhB,CAKP,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,SAAO,CACpBH,IAAI,CAAER,MADc,CAAP,EAAjB,CAIA,MAAO,IAAMY,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAM,UAACC,QAAD,CAAc,CAC3ChB,MAAM,GAAGiB,IAAT,CAAc,SAAAC,QAAQ,CAAI,CACtB,GAAIA,QAAQ,CAACC,IAAT,CAAcC,UAAd,GAA6B,CAAjC,CAAoCJ,QAAQ,CAACF,QAAQ,EAAT,CAAR,CACvC,CAFD,EAGH,CAJ0B,EAApB,CAMP,MAAO,IAAMO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACf,KAAD,CAAQgB,QAAR,CAAkBC,UAAlB,QAAiC,UAACP,QAAD,CAAc,CACrEf,KAAK,CAACK,KAAD,CAAQgB,QAAR,CAAkBC,UAAlB,CAAL,CAAmCN,IAAnC,CAAwC,SAAAC,QAAQ,CAAI,CAChD,GAAIA,QAAQ,CAACC,IAAT,CAAcC,UAAd,GAA6B,CAAjC,CAAoCJ,QAAQ,CAACH,OAAO,CAAC,CAACP,KAAK,CAALA,KAAD,CAAQD,EAAE,CAAEa,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBK,MAA/B,CAAD,CAAR,CAAR,CACvC,CAFD,EAGH,CAJyB,EAAnB,CAMP,cAAehB,CAAAA,WAAf","sourcesContent":["import { logout, login } from \"../components/api/api\"\n\nconst GET_AUTH = 'GET_AUTH'\nconst LOGOUT = 'LOGOUT'\n\nconst initialState = {\n    id: null,\n    login: '',\n    email: '',\n    isAuth: false\n}\n\nconst authReducer = (state=initialState, action) => {\n    switch (action.type) {\n        case GET_AUTH:\n            return {...state, ...action.authInfo, isAuth: true}\n        case LOGOUT: \n            return {...state, isAuth: false, id: null, login: '', email: ''}\n        default: return state\n    }\n}\n\nexport const getAuth = (authInfo) => ({\n    type: GET_AUTH,\n    authInfo\n})\n\nconst logoutAC = () => ({\n    type: LOGOUT\n})\n\nexport const logoutThunk = () => (dispatch) => {\n    logout().then(response => {\n        if (response.data.resultCode === 0) dispatch(logoutAC())\n    })\n}\n\nexport const loginThunk = (email, password, rememberMe) => (dispatch) => {\n    login(email, password, rememberMe).then(response => {\n        if (response.data.resultCode === 0) dispatch(getAuth({email, id: response.data.data.userId}))\n    })\n}\n\nexport default authReducer"]},"metadata":{},"sourceType":"module"}