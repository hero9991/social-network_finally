{"ast":null,"code":"import _toConsumableArray from\"/Users/a000/Desktop/react-soc-2/my-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/a000/Desktop/react-soc-2/my-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{getUsers,unfollowUser,followUser}from\"../components/api/api\";var GET_USERS='GET_USERS';var CHANGE_PAGE='CHANGE_PAGE';var LOAD='LOAD';var FOLLOW='FOLLOW';var UNFOLLOW='UNFOLLOW';var DISABLE='DISABLE';var ENABLE='ENABLE';var initialState={users:[],usersCount:0,trueUsersCount:100,activePage:1,isLoaded:false,isDisabled:[]};var usersReducer=function usersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case GET_USERS:return _objectSpread(_objectSpread({},state),{},{users:_toConsumableArray(action.users),usersCount:action.usersCount});case CHANGE_PAGE:return _objectSpread(_objectSpread({},state),{},{activePage:action.activePage});case LOAD:return _objectSpread(_objectSpread({},state),{},{isLoaded:action.isLoaded});case FOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(item){return item.id===action.userId?_objectSpread(_objectSpread({},item),{},{followed:true}):item;})});case UNFOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(item){return item.id===action.userId?_objectSpread(_objectSpread({},item),{},{followed:false}):item;})});case DISABLE:return _objectSpread(_objectSpread({},state),{},{isDisabled:[].concat(_toConsumableArray(state.isDisabled),[action.userId])});case ENABLE:return _objectSpread(_objectSpread({},state),{},{isDisabled:state.isDisabled.filter(function(item){return item!==action.userId;})});default:return state;}};var setUsers=function setUsers(users,usersCount){return{type:GET_USERS,users:users,usersCount:usersCount};};export var changePage=function changePage(activePage){return{type:CHANGE_PAGE,activePage:activePage};};var load=function load(isLoaded){return{type:LOAD,isLoaded:isLoaded};};var follow=function follow(userId){return{type:FOLLOW,userId:userId};};var unfollow=function unfollow(userId){return{type:UNFOLLOW,userId:userId};};var disable=function disable(userId){return{type:DISABLE,userId:userId};};var enable=function enable(userId){return{type:ENABLE,userId:userId};};export var setUsersThunk=function setUsersThunk(trueUsersCount,activePage){return function(dispatch){dispatch(load(false));getUsers(trueUsersCount,activePage).then(function(response){dispatch(load(true));dispatch(setUsers(response.data.items,response.data.totalCount));});};};export var unfollowThunk=function unfollowThunk(id){return function(dispatch){dispatch(disable(id));unfollowUser(id).then(function(response){if(response.data.resultCode===0){dispatch(unfollow(id));dispatch(enable(id));}});};};export var followThunk=function followThunk(id){return function(dispatch){dispatch(disable(id));followUser(id).then(function(response){if(response.data.resultCode===0){dispatch(follow(id));dispatch(enable(id));}});};};export default usersReducer;","map":{"version":3,"sources":["/Users/a000/Desktop/react-soc-2/my-react-app/src/redux/users-reducer.js"],"names":["getUsers","unfollowUser","followUser","GET_USERS","CHANGE_PAGE","LOAD","FOLLOW","UNFOLLOW","DISABLE","ENABLE","initialState","users","usersCount","trueUsersCount","activePage","isLoaded","isDisabled","usersReducer","state","action","type","map","item","id","userId","followed","filter","setUsers","changePage","load","follow","unfollow","disable","enable","setUsersThunk","dispatch","then","response","data","items","totalCount","unfollowThunk","resultCode","followThunk"],"mappings":"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","sourcesContent":["import { getUsers, unfollowUser, followUser } from \"../components/api/api\"\n\nconst GET_USERS = 'GET_USERS'\nconst CHANGE_PAGE = 'CHANGE_PAGE'\nconst LOAD = 'LOAD'\nconst FOLLOW = 'FOLLOW'\nconst UNFOLLOW = 'UNFOLLOW'\nconst DISABLE = 'DISABLE'\nconst ENABLE = 'ENABLE'\n\nlet initialState = {\n    users: [],\n    usersCount: 0,\n    trueUsersCount: 100,\n    activePage: 1,\n    isLoaded: false,\n    isDisabled: []\n}\n\nconst usersReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case GET_USERS:\n            return { ...state, users: [...action.users], usersCount: action.usersCount }\n        case CHANGE_PAGE:\n            return { ...state, activePage: action.activePage }\n        case LOAD:\n            return { ...state, isLoaded: action.isLoaded }\n        case FOLLOW:\n            return { ...state, users: state.users.map(item => item.id === action.userId ? { ...item, followed: true } : item) }\n        case UNFOLLOW:\n            return { ...state, users: state.users.map(item => item.id === action.userId ? { ...item, followed: false } : item) }\n        case DISABLE:\n            return { ...state, isDisabled: [...state.isDisabled, action.userId]}\n        case ENABLE:\n            return { ...state, isDisabled: state.isDisabled.filter(item => item !== action.userId)}\n        default: return state\n    }\n}\n\nconst setUsers = (users, usersCount) => ({\n    type: GET_USERS,\n    users,\n    usersCount\n})\nexport const changePage = (activePage) => ({\n    type: CHANGE_PAGE,\n    activePage\n})\nconst load = (isLoaded) => ({\n    type: LOAD,\n    isLoaded\n})\nconst follow = (userId) => ({\n    type: FOLLOW,\n    userId\n})\nconst unfollow = (userId) => ({\n    type: UNFOLLOW,\n    userId\n})\nconst disable = (userId) => ({\n    type: DISABLE,\n    userId\n})\nconst enable = (userId) => ({\n    type: ENABLE,\n    userId\n})\n\nexport const setUsersThunk = (trueUsersCount, activePage) => (dispatch) => {\n    dispatch(load(false))\n    getUsers(trueUsersCount, activePage).then(response => {\n        dispatch(load(true))\n        dispatch(setUsers(response.data.items, response.data.totalCount))\n    })\n}\nexport const unfollowThunk = (id ) => (dispatch) => {\n    dispatch(disable(id))\n    unfollowUser(id).then(response => {\n        if (response.data.resultCode === 0) {\n            dispatch(unfollow(id))\n            dispatch(enable(id))\n        }\n    })\n}\nexport const followThunk = (id ) => (dispatch) => {\n    dispatch(disable(id))\n    followUser(id).then(response => {\n        if (response.data.resultCode === 0) {\n            dispatch(follow(id))\n            dispatch(enable(id))\n        }\n    })\n}\n\nexport default usersReducer"]},"metadata":{},"sourceType":"module"}