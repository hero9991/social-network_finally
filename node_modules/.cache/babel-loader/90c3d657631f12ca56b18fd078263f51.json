{"ast":null,"code":"import { getUsers, unfollowUser } from \"../components/api/api\";\nconst GET_USERS = 'GET_USERS';\nconst CHANGE_PAGE = 'CHANGE_PAGE';\nconst LOAD = 'LOAD';\nconst FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst DISABLE = 'DISABLE';\nconst ENABLE = 'ENABLE';\nlet initialState = {\n  users: [],\n  usersCount: 0,\n  trueUsersCount: 100,\n  activePage: 1,\n  isLoaded: false,\n  isDisabled: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  debugger;\n\n  switch (action.type) {\n    case GET_USERS:\n      return { ...state,\n        users: [...action.users],\n        usersCount: action.usersCount\n      };\n\n    case CHANGE_PAGE:\n      return { ...state,\n        activePage: action.activePage\n      };\n\n    case LOAD:\n      return { ...state,\n        isLoaded: action.isLoaded\n      };\n\n    case FOLLOW:\n      return { ...state,\n        users: state.users.map(item => item.id === action.userId ? { ...item,\n          followed: true\n        } : item)\n      };\n\n    case UNFOLLOW:\n      return { ...state,\n        users: state.users.map(item => item.id === action.userId ? { ...item,\n          followed: false\n        } : item)\n      };\n\n    case DISABLE:\n      return { ...state,\n        isDisabled: [...state.isDisabled, action.userId]\n      };\n\n    case ENABLE:\n      return { ...state,\n        isDisabled: state.isDisabled.filter(item => item !== action.userId)\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst setUsers = (users, usersCount) => ({\n  type: GET_USERS,\n  users,\n  usersCount\n});\n\nexport const changePage = activePage => ({\n  type: CHANGE_PAGE,\n  activePage\n});\n\nconst load = isLoaded => ({\n  type: LOAD,\n  isLoaded\n});\n\nexport const follow = userId => ({\n  type: FOLLOW,\n  userId\n});\nexport const unfollow = userId => ({\n  type: UNFOLLOW,\n  userId\n});\nexport const disable = userId => ({\n  type: DISABLE,\n  userId\n});\nexport const enable = userId => ({\n  type: ENABLE,\n  userId\n});\nexport const setUsersThunk = (trueUsersCount, activePage) => dispatch => {\n  dispatch(load(false));\n  getUsers(trueUsersCount, activePage).then(response => {\n    dispatch(load(true));\n    dispatch(setUsers(response.data.items, response.data.totalCount));\n  });\n};\nexport const followThunk = id => dispatch => {\n  dispatch(disable(id));\n  unfollowUser;\n  unfollowUser(props.id).then(response => {\n    if (response.data.resultCode === 0) {\n      props.unfollow(props.id);\n      props.enable(props.id);\n    }\n  });\n};\nexport default usersReducer;","map":{"version":3,"sources":["/Users/a000/Desktop/react-soc-2/my-react-app/src/redux/users-reducer.js"],"names":["getUsers","unfollowUser","GET_USERS","CHANGE_PAGE","LOAD","FOLLOW","UNFOLLOW","DISABLE","ENABLE","initialState","users","usersCount","trueUsersCount","activePage","isLoaded","isDisabled","usersReducer","state","action","type","map","item","id","userId","followed","filter","setUsers","changePage","load","follow","unfollow","disable","enable","setUsersThunk","dispatch","then","response","data","items","totalCount","followThunk","props","resultCode"],"mappings":"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","sourcesContent":["import { getUsers, unfollowUser } from \"../components/api/api\"\n\nconst GET_USERS = 'GET_USERS'\nconst CHANGE_PAGE = 'CHANGE_PAGE'\nconst LOAD = 'LOAD'\nconst FOLLOW = 'FOLLOW'\nconst UNFOLLOW = 'UNFOLLOW'\nconst DISABLE = 'DISABLE'\nconst ENABLE = 'ENABLE'\n\nlet initialState = {\n    users: [],\n    usersCount: 0,\n    trueUsersCount: 100,\n    activePage: 1,\n    isLoaded: false,\n    isDisabled: []\n}\n\nconst usersReducer = (state = initialState, action) => {\n    debugger\n    switch (action.type) {\n        case GET_USERS:\n            return { ...state, users: [...action.users], usersCount: action.usersCount }\n        case CHANGE_PAGE:\n            return { ...state, activePage: action.activePage }\n        case LOAD:\n            return { ...state, isLoaded: action.isLoaded }\n        case FOLLOW:\n            return { ...state, users: state.users.map(item => item.id === action.userId ? { ...item, followed: true } : item) }\n        case UNFOLLOW:\n            return { ...state, users: state.users.map(item => item.id === action.userId ? { ...item, followed: false } : item) }\n        case DISABLE:\n            return { ...state, isDisabled: [...state.isDisabled, action.userId]}\n        case ENABLE:\n            return { ...state, isDisabled: state.isDisabled.filter(item => item !== action.userId)}\n        default: return state\n    }\n}\n\nconst setUsers = (users, usersCount) => ({\n    type: GET_USERS,\n    users,\n    usersCount\n})\nexport const changePage = (activePage) => ({\n    type: CHANGE_PAGE,\n    activePage\n})\nconst load = (isLoaded) => ({\n    type: LOAD,\n    isLoaded\n})\nexport const follow = (userId) => ({\n    type: FOLLOW,\n    userId\n})\nexport const unfollow = (userId) => ({\n    type: UNFOLLOW,\n    userId\n})\nexport const disable = (userId) => ({\n    type: DISABLE,\n    userId\n})\nexport const enable = (userId) => ({\n    type: ENABLE,\n    userId\n})\n\nexport const setUsersThunk = (trueUsersCount, activePage) => (dispatch) => {\n    dispatch(load(false))\n    getUsers(trueUsersCount, activePage).then(response => {\n        dispatch(load(true))\n        dispatch(setUsers(response.data.items, response.data.totalCount))\n    })\n}\nexport const followThunk = (id, ) => (dispatch) => {\n    dispatch(disable(id))\n    unfollowUser\n    unfollowUser(props.id).then(response => {\n        if (response.data.resultCode === 0) {\n            props.unfollow(props.id)\n            props.enable(props.id)\n        }\n    })\n}\n\nexport default usersReducer"]},"metadata":{},"sourceType":"module"}